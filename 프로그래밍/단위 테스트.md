# 테스트 코드의 필요성
테스트 코드 없이는 제품 코드가 정상적으로 작동하는지 보장할 수 없기 때문에 모든 변경이 버그의 가능성을 품게 된다. 훌륭한 설계를 갖어 변경을 수용할 수 있는 제품 코드라고 하더라도 수정 중 의도하지 않는 버그를 만들 수 있다는 두려움이 변경을 어렵게 만든다. 결론적으로 테스트 제품 코드가 없는 코드는 더이상 개선되지 않고 망가져간다.

테스트 코드는 제품 코드를 유연하게 만들고 유지보수와 재사용가능하게 만든다. 테스트 코드가 있을 경우 제품 코드를 유연하고, 유지보수와 재사용 가능하게 개선하는데 필요한 변경을 가능하게 만들어주기 때문이다. 결론적으로 테스트 코드는 수정 가능한 코드를 만드는데 필수적인 요소이다.

## 참고
[book] (Robert C. Martin) Clean Code Chap8

# 깨끗한 테스트 코드의 필요성
깨끗한 테스트 코드를 가져야 하는 이유는 테스트 코드 또한 유지보수해야 하기 때문이다.

제품 코드를 수정하면 이전에 작성했던 테스트 코드는 더이상 유효하지 않고 실패할 수 있다. 따라서 현재 제품 코드에 맞게 테스트 코드도 유지보수가 필요하다. 하지만 지저분한 테스트 코드로 인해 테스트 코드를 수정하는데 비용이 높아질 수록 테스트 코드가 가지고 있는 장점에도 불구하고 부담으로 다가오게 된다. 

따라서 유지보수하기 쉬운 깨끗한 테스트 코드가 필요하다.

## 깨끗한 테스트 코드
깨끗한 테스트 코드란 무엇인가? 첫째도 둘째도 셋째도 `가독성(readability)`이다. 테스트 코드에서는 제품코드보다 가독성이 더욱 중요하다.

그렇다면 테스트 코드의 가독성은 어떻게 높힐 수 있는가? 명확하고(clarity) 단순하고(simplicity) 밀도 높은 표현(density of expression)을 사용해야 한다. 테스트 코드에서는 가능한한 적은 표현으로 테스트하고자 하는 바를 표현해야 한다.

1. 불필요한 상세내용을 숨겨라. Build-Operate-Check 패턴을 사용하라. (ex p.125 - 126)
   1. 테스트를 위한 API를 사용하여 테스트 코드의 가독성을 높혀라.
2. A Dual standard(p.127) - 이해 안됨
3. One Assert per Test
   1. 하나의 테스트당 Assertion이 하나일 경우 테스트를 이해하기 훨씬 쉬워진다.(given - when then convenition)
   2. 하나의 테스트당 Assertion이 하나일 경우 중복 코드가 발생할 수 있다.
   3. 반드시 하나일 필요는 없지만 최소화하는것이 테스트를 이해하기 쉽게 만든다.
   4. 여러개의 Assertion이 있을 경우 결론적으로 어떤 Assertion에서 예외가 발생했는지 또 확인해야 된다.
4. Single Concept per Test
   1. 여러 컨셉을 동시에 테스트 하는경우 각각의 컨셉이 무엇인지 유추해야 한다.
5. F.I.R.S.T
   1. Fast : 테스트가 느릴경우 자주 돌리기 어렵고 결국 테스트 하기 어렵게 만든다.
   2. Independent : 모든 테스트는 독립적이여야 한다. 종속적인 테스트는 원인 분석을 어렵게 만든다.
   3. Repetable : 모든 환경에서 반복적으로 돌릴 수 있어야 한다. 인터넷이 없는 환경, 제품 환경, QA환경
   4. Self-validating : 결과가 자동으로 P/F 형식으로 나와야 한다. 수동으로 P/F 여부를 분석해서는 안된다.
   5. Timely : 제품 코드가 완성 되기 전에 테스트 코드를 작성해야 한다. 완성된 제품 코드에 테스트 코드를 끼워 맞추는것이 아니라 제품 코드를 작성하는 중에 테스트 코드를 작성함으로써 제품 코드가 테스트 가능하게 해야한다. 만약 어떤 제품 코드의 테스트 코드를 작성하기 어렵다면 이는 제품 코드를 테스트 가능하게 작성하지 않았기 때문이다.

## 참고
[book] (Robert C. Martin) Clean Code Chap8

# 테스트 가능한 코드




# Gmock

[How to use Google Mock - 놀고 먹고 일하는 이야기 블로그](https://ungodly-hour.tistory.com/17)